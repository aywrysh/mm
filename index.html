<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">

<style>
:root{
  --glass: rgba(255,255,255,.75);
  --glass-dark: rgba(255,255,255,.55);
  --ink:#0f172a;
  --muted:#475569;
  --accent:#BBCF38;
  --accent2:#89A61B;
}

*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  font-family:Cairo, sans-serif;
  background:
    radial-gradient(800px 500px at 10% 10%, rgba(187,207,56,.25), transparent 60%),
    radial-gradient(700px 500px at 90% 20%, rgba(15,23,42,.15), transparent 60%),
    linear-gradient(180deg,#f8fafc,#e5e7eb);
  display:grid;
  place-items:center;
  color:var(--ink);
}

/* Ø¨Ø·Ø§Ù‚Ø© Ø²Ø¬Ø§Ø¬ÙŠØ© */
.card{
  width:360px;
  background:var(--glass);
  backdrop-filter: blur(18px);
  border-radius:26px;
  padding:22px;
  border:1px solid rgba(255,255,255,.6);
  box-shadow:
    0 30px 80px rgba(15,23,42,.25),
    inset 0 1px 0 rgba(255,255,255,.9);
}

/* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
h1{
  margin:0 0 4px;
  font-size:26px;
  font-weight:900;
}
p{
  margin:0 0 16px;
  color:var(--muted);
  font-size:13px;
  font-weight:700;
}

/* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
label{
  font-size:13px;
  font-weight:900;
  color:var(--muted);
  display:block;
  margin-bottom:6px;
}

input{
  width:100%;
  margin-bottom:14px;
  padding:13px 14px;
  border-radius:16px;
  border:1px solid rgba(15,23,42,.15);
  background:rgba(255,255,255,.9);
  color:var(--ink);
  font-weight:800;
  outline:none;
  transition:.2s;
}

input::placeholder{color:#94a3b8}

input:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 6px rgba(187,207,56,.25);
}

/* Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ */
button{
  width:100%;
  padding:14px;
  border-radius:18px;
  border:none;
  background:linear-gradient(180deg,var(--accent),var(--accent2));
  color:#0b120f;
  font-weight:900;
  font-size:15px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  box-shadow:
    0 18px 40px rgba(187,207,56,.35),
    inset 0 1px 0 rgba(255,255,255,.6);
  transition:.15s;
}

button:hover{
  transform:translateY(-1px);
  box-shadow:0 24px 55px rgba(187,207,56,.45);
}
button:active{transform:translateY(1px)}

/* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
.alert{
  margin-top:14px;
  padding:12px;
  border-radius:16px;
  font-weight:900;
  font-size:13px;
  text-align:center;
}

.ok{
  background:rgba(34,197,94,.15);
  color:#15803d;
  border:1px solid rgba(34,197,94,.35);
}

.bad{
  background:rgba(239,68,68,.15);
  color:#991b1b;
  border:1px solid rgba(239,68,68,.35);
}
</style>
</head>

<body>

<div class="card">
  <h1>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
  <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</p>

  <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
  <input id="u" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">

  <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
  <input id="p" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">

  <button onclick="login()">
    <span class="material-symbols-rounded">login</span>
    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  </button>

  <div id="msg" class="alert"></div>
</div>

<!-- ðŸ”½ ðŸ”½ ðŸ”½ Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª Ù„Ù… ÙŠÙÙ„Ù…Ø³ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ ðŸ”½ ðŸ”½ ðŸ”½ -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

<script>
/* ðŸ”¥ Firebase */
firebase.initializeApp({
  apiKey: "AIzaSyBr3mtTHa_nJajn9H5N1V5sWNHIHY8RU8g",
  authDomain: "dynex-f4486.firebaseapp.com",
  databaseURL: "https://dynex-f4486-default-rtdb.firebaseio.com",
  projectId: "dynex-f4486"
});
const db = firebase.database();

/* ðŸ” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
const PATH = "users_v2";
const DEF_USER = "Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…";
const DEF_PASS = "2020";
const STORE_KEY = "last_username";

/* Ø£Ø¯ÙˆØ§Øª */
const msg = (t,m)=>{
  const d=document.getElementById("msg");
  d.className="alert "+t;
  d.textContent=m;
};
const key = n => encodeURIComponent(n);

/* âœ¨ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠ */
async function ensureAdmin(){
  const ref=db.ref(PATH+"/"+key(DEF_USER));
  const s=await ref.get();
  if(!s.exists()){
    await ref.set({
      username:DEF_USER,
      password:DEF_PASS,
      role:"admin",
      createdAt:Date.now()
    });
  }
}

/* ðŸš€ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
async function login(){
  const u=document.getElementById("u").value.trim();
  const p=document.getElementById("p").value;
  if(!u||!p){msg("bad","Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return;}

  try{
    await ensureAdmin();
    const snap=await db.ref(PATH+"/"+key(u)).get();
    if(!snap.exists()){msg("bad","Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");return;}
    if(snap.val().password!==p){msg("bad","ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø·Ø£");return;}

    localStorage.setItem(STORE_KEY,u);
    msg("ok","ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ âœ…");
    setTimeout(()=>location.href="index1.html",700);

  }catch(e){
    msg("bad","Ø®Ø·Ø£ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    console.error(e);
  }
}

/* ðŸ§  ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ø§Ø³Ù… */
document.getElementById("u").value=localStorage.getItem(STORE_KEY)||DEF_USER;
ensureAdmin();
</script>

</body>
</html>